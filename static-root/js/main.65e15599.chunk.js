(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(5),r=n.n(c),s=(n(12),n(13),n(4)),i=n(1);function l(e,t,n,a){var o;a&&(o=JSON.stringify(a));var c=new XMLHttpRequest,r="http://localhost:8000/api".concat(t);c.responseType="json";var s=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var o=n[a].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}("csrftoken");c.open(e,r),s&&a&&(c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("X-CSRFToken",s)),c.onload=function(){403===c.status&&"Authentication credentials were not provided."===c.response.detail&&(window.location.href="/login?showLoginRequired=true"),n(c.response,c.status)},c.onerror=function(e){n({message:"error"},400),alert("Greska")},c.send(o)}function u(e){var t=e.post,n=e.className,a=e.action,c=e.didPerformAction,r=t.likes?t.likes:0,s=function(e,t){200!==t&&201!==t||!c||c(e,t)},i="like"===a.type?"".concat(r," ").concat(a.display):a.display;return o.a.createElement("button",{className:n,onClick:function(e){e.preventDefault(),function(e,t,n){l("POST","/posts/action",n,{id:e,action:t})}(t.id,a.type,s)}}," ",i," ")}function d(e){var t=e.post,n=e.className,c=Object(a.useState)(e.post?e.post:null),r=Object(i.a)(c,2),s=r[0],l=r[1],d=function(e){var t=e.match(/\d+/g);return t[t.length-1]}(window.location.href),m=t.id===parseInt(d),f=function(e){l(e)};return o.a.createElement("div",{className:n},o.a.createElement("p",null,"#",t.id," - ",t.content),o.a.createElement(u,{className:"btn btn-secondary",post:s,didPerformAction:f,action:{type:"like",display:"Likes"}}),o.a.createElement(u,{className:"btn btn-secondary",post:s,didPerformAction:f,action:{type:"dislike",display:"Dislike"}}),!0===m?null:o.a.createElement("button",{className:"btn btn-secondary",onClick:function(e){e.preventDefault(),window.location.href="/".concat(t.id)}},"DETAIL"))}function m(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],r=n[1],u=Object(a.useState)([]),m=Object(i.a)(u,2),f=m[0],p=m[1],b=Object(a.useState)(!1),v=Object(i.a)(b,2),E=v[0],h=v[1];return Object(a.useEffect)((function(){var t=Object(s.a)(e.newPosts).concat(c);t.length!==f.length&&p(t)}),[e.newPosts,f,c]),Object(a.useEffect)((function(){if(!1===E){!function(e,t){var n="/posts/";e&&(n="/posts/?username=".concat(e)),l("GET",n,t)}(e.username,(function(e,t){200===t?(r(e),h(!0)):alert("error")}))}}),[c,E,h,e.username]),f.map((function(e){return o.a.createElement(d,{className:"border border-primary col-5 py-5 my-5 mx-auto",post:e,key:e.id})}))}function f(e){var t=o.a.createRef(),n=e.didPost;return o.a.createElement("div",{className:"col-12 mb-4"},o.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault();var a=t.current.value;l("POST","/posts/create",(function(e,t){201===t?n(e):(alert("error"),console.log(e))}),{content:a}),t.current.value=""}},o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("textarea",{required:!0,ref:t}),o.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"SUBMIT"))))}function p(e){var t=e.id,n=Object(a.useState)(!1),c=Object(i.a)(n,2),r=c[0],s=c[1],u=Object(a.useState)(null),m=Object(i.a)(u,2),f=m[0],p=m[1],b=function(e,t){200===t?p(e):alert("Post not found")};return Object(a.useEffect)((function(){r||(!function(e,t){l("GET","/posts/".concat(e,"/"),t)}(t,b),s(!0))}),[t,r,s]),null===f?null:o.a.createElement(d,{post:f})}function b(e){var t="false"!==e.hasPermission,n=Object(a.useState)([]),c=Object(i.a)(n,2),r=c[0],l=c[1];return o.a.createElement("div",{className:e.className},!0===t&&o.a.createElement(f,{didPost:function(e){var t=Object(s.a)(r);t.unshift(e),l(t)},className:"col-12 mb-3"}),o.a.createElement(m,Object.assign({newPosts:r},e)))}var v=function(){return o.a.createElement("div",{className:"bg-light"},o.a.createElement(b,{className:"border border-secondary col-3 py-2 my-4 mx-auto"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));document.getElementById("root")&&r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(v,null)),document.getElementById("root"));var E=document.getElementById("postsComp"),h=o.a.createElement;E&&r.a.render(h(b,E.dataset),E),document.querySelectorAll(".post-detail").forEach((function(e){r.a.render(h(p,e.dataset),e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){e.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.65e15599.chunk.js.map