(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(5),c=n.n(r),s=(n(12),n(13),n(4)),i=n(1);function l(e,t,n,a){var o;a&&(o=JSON.stringify(a));var r=new XMLHttpRequest,c="http://localhost:8000/api".concat(t);r.responseType="json";var s=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var o=n[a].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}("csrftoken");r.open(e,c),s&&a&&(r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",s)),r.onload=function(){r.status,n(r.response,r.status)},r.onerror=function(e){n({message:"error"},400),alert("Greska")},r.send(o)}function u(e){var t=e.post,n=e.className,a=e.action,r=e.didPerformAction,c=t.likes?t.likes:0,s=function(e,t){200!==t&&201!==t||!r||r(e,t)},i="like"===a.type?"".concat(c," ").concat(a.display):a.display;return o.a.createElement("button",{className:n,onClick:function(e){e.preventDefault(),function(e,t,n){l("POST","/posts/action",n,{id:e,action:t})}(t.id,a.type,s)}}," ",i," ")}function m(e){return o.a.createElement("span",{style:{cursor:"pointer"},onClick:function(t){t.preventDefault(),window.location.href="/profile/".concat(e.post.creator.username)},className:"py-3 px-3  rounded-circle bg-dark"},e.post.creator.username," ")}function d(e){var t=e.post,n=e.className,r=Object(a.useState)(e.post?e.post:null),c=Object(i.a)(r,2),s=c[0],l=c[1],d=function(e){var t=e.match(/\d+/g);return t[t.length-1]}(window.location.href),f=t.id===parseInt(d),p=function(e,t){200===t&&l(e)},b=function(e){var t=e.split("T");return[t[0],t[1].split(".")[0]]}(t.timestamp);return o.a.createElement("div",{className:n},o.a.createElement(m,{post:t}),o.a.createElement("p",{className:"mt-3"},t.creator.username),o.a.createElement("p",{className:"mt-3"},"#",t.id," - ",t.content),!1===f?null:o.a.createElement("div",null,o.a.createElement("div",null,t.creator.first_name," ",t.creator.last_name),o.a.createElement("div",null,b[0],", ",b[1])),o.a.createElement(u,{className:"btn btn-secondary",post:s,didPerformAction:p,action:{type:"like",display:"Likes"}}),o.a.createElement(u,{className:"btn btn-secondary",post:s,didPerformAction:p,action:{type:"dislike",display:"Dislike"}}),!0===f?null:o.a.createElement("button",{className:"btn btn-secondary",onClick:function(e){e.preventDefault(),window.location.href="/".concat(t.id)}},"DETAIL"))}function f(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)([]),m=Object(i.a)(u,2),f=m[0],p=m[1],b=Object(a.useState)(!1),E=Object(i.a)(b,2),v=E[0],y=E[1];return Object(a.useEffect)((function(){var t=Object(s.a)(e.newPosts).concat(r);t.length!==f.length&&p(t)}),[e.newPosts,f,r]),Object(a.useEffect)((function(){if(!1===v){!function(e,t){var n="/posts/";e&&(n="/posts/?username=".concat(e)),l("GET",n,t)}(e.username,(function(e,t){200===t?(c(e),y(!0)):alert("error")}))}}),[r,v,y,e.username]),f.map((function(e){return o.a.createElement(d,{className:"border border-primary col-5 py-5 my-5 mx-auto",post:e,key:e.id})}))}function p(e){var t=o.a.createRef(),n=e.didPost;return o.a.createElement("div",{className:"col-12 mb-4"},o.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault();var a=t.current.value;l("POST","/posts/create",(function(e,t){201===t?n(e):(alert("error"),console.log(e))}),{content:a}),t.current.value=""}},o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("textarea",{required:!0,ref:t}),o.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"SUBMIT"))))}function b(e){var t=e.id,n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],s=r[1],u=Object(a.useState)(null),m=Object(i.a)(u,2),f=m[0],p=m[1],b=function(e,t){200===t?p(e):alert("Post not found")};return Object(a.useEffect)((function(){c||(!function(e,t){l("GET","/posts/".concat(e,"/"),t)}(t,b),s(!0))}),[t,c,s]),null===f?null:o.a.createElement(d,{post:f})}function E(e){var t="false"!==e.hasPermission,n=Object(a.useState)([]),r=Object(i.a)(n,2),c=r[0],l=r[1];return o.a.createElement("div",{className:e.className},!0===t&&o.a.createElement(p,{didPost:function(e){var t=Object(s.a)(c);t.unshift(e),l(t)},className:"col-12 mb-3"}),o.a.createElement(f,Object.assign({newPosts:c},e)))}var v=function(){return o.a.createElement("div",{className:"bg-light"},o.a.createElement(E,{className:"border border-secondary col-3 py-2 my-4 mx-auto"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));document.getElementById("root")&&c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(v,null)),document.getElementById("root"));var y=document.getElementById("postsComp"),h=o.a.createElement;y&&c.a.render(h(E,y.dataset),y),document.querySelectorAll(".post-detail").forEach((function(e){c.a.render(h(b,e.dataset),e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){e.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.4e7841b8.chunk.js.map