(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(5),c=n.n(r),s=(n(12),n(13),n(4)),l=n(1);function i(e,t,n,a){var o;a&&(o=JSON.stringify(a));var r=new XMLHttpRequest,c="http://localhost:8000".concat(t);r.responseType="json";var s=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var o=n[a].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}("csrftoken");r.open(e,c),s&&a&&(r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",s)),r.onload=function(){403===r.status&&"Authentication credentials were not provided."===r.response.detail&&(window.location.href="/"),n(r.response,r.status)},r.onerror=function(e){n({message:"error"},400),alert("Greska")},r.send(o)}function u(e){var t=e.post,n=e.className,a=e.action,r=e.didPerformAction,c=t.likes?t.likes:0,s=function(e,t){200!==t&&201!==t||!r||r(e,t)},l="like"===a.type?"".concat(c," ").concat(a.display):a.display;return o.a.createElement("button",{className:n,onClick:function(e){e.preventDefault(),function(e,t,n){i("POST","/api/posts/action",n,{id:e,action:t})}(t.id,a.type,s)}}," ",l," ")}function m(e){return o.a.createElement("span",{style:{cursor:"pointer"},onClick:function(t){console.log(e.post.creator),t.preventDefault(),window.location.href="/profile/".concat(e.post.creator.username)},className:"py-3 px-3  rounded-circle bg-dark"},e.post.creator.username," ")}function d(e){var t=e.post,n=e.className,r=Object(a.useState)(e.post?e.post:null),c=Object(l.a)(r,2),s=c[0],i=c[1],d=function(e){var t=e.match(/\d+/g);return t[t.length-1]}(window.location.href),f=t.id===parseInt(d),p=function(e,t){200===t&&i(e)},v=function(e){var t=e.split("T");return[t[0],t[1].split(".")[0]]}(t.timestamp);return o.a.createElement("div",{className:n},o.a.createElement(m,{post:t}),o.a.createElement("p",{className:"mt-3"},t.creator.username),o.a.createElement("p",{className:"mt-3"},"#",t.id," - ",t.content),!1===f?null:o.a.createElement("div",null,o.a.createElement("div",null,t.creator.first_name," ",t.creator.last_name),o.a.createElement("div",null,v[0],", ",v[1])),o.a.createElement(u,{className:"btn btn-secondary",post:s,didPerformAction:p,action:{type:"like",display:"Likes"}}),o.a.createElement(u,{className:"btn btn-secondary",post:s,didPerformAction:p,action:{type:"dislike",display:"Dislike"}}),!0===f?null:o.a.createElement("button",{className:"btn btn-secondary",onClick:function(e){e.preventDefault(),window.location.href="/".concat(t.id)}},"DETAIL"),e.loggedUser===t.creator.username?o.a.createElement("div",{className:"float-right",onClick:function(){return e.handleDeletePost(t.id)}},o.a.createElement("svg",{width:"2em",height:"2em",viewBox:"0 0 16 16",className:"bi bi-trash",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),o.a.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))):null)}function f(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)([]),m=Object(l.a)(u,2),f=m[0],p=m[1],v=Object(a.useState)(!1),b=Object(l.a)(v,2),E=b[0],h=b[1];Object(a.useEffect)((function(){var t=Object(s.a)(e.newPosts).concat(r);t.length!==f.length&&p(t)}),[e.newPosts,f,r]),Object(a.useEffect)((function(){if(!1===E){!function(e,t){var n="/api/posts/";e&&(n="/api/posts/?username=".concat(e)),i("GET",n,t)}(e.username,(function(e,t){200===t?(c(e),h(!0)):alert("error")}))}}),[r,E,h,e.username]);var g=function(e){c(f.filter((function(t){return t.id!==e}))),function(e,t){i("DELETE","/api/posts/".concat(e,"/delete"),t,{id:e})}(e,y),console.log(e)},y=function(e,t){200===t?(alert("Post Deleted"),console.log(e,t)):alert("Post not found")};return f.map((function(t){return o.a.createElement(d,{className:"border border-primary col-5 py-5 my-5 mx-auto",post:t,key:t.id,handleDeletePost:g,loggedUser:e.loggedUser})}))}function p(e){var t=o.a.createRef(),n=e.didPost;return o.a.createElement("div",{className:"col-12 mb-4"},o.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault();var a=t.current.value;i("POST","/api/posts/create",(function(e,t){201===t?n(e):(alert("error"),console.log(e))}),{content:a}),t.current.value=""}},o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("textarea",{required:!0,ref:t}),o.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"SUBMIT"))))}function v(e){var t=e.id,n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],s=r[1],u=Object(a.useState)(null),m=Object(l.a)(u,2),f=m[0],p=m[1],v=function(e,t){200===t?p(e):alert("Post not found")};return Object(a.useEffect)((function(){c||(!function(e,t){i("GET","/api/posts/".concat(e,"/"),t)}(t,v),s(!0))}),[t,c,s]),null===f?null:o.a.createElement(d,{post:f})}function b(e){var t="false"!==e.hasPermission,n=e.loggedUser,r=Object(a.useState)([]),c=Object(l.a)(r,2),i=c[0],u=c[1];return o.a.createElement("div",{className:e.className},!0===t&&o.a.createElement(p,{didPost:function(e){var t=Object(s.a)(i);t.unshift(e),u(t)},className:"col-12 mb-3"}),o.a.createElement(f,Object.assign({newPosts:i},e,{loggedUser:n})))}var E=function(){return o.a.createElement("div",{className:"bg-light"},o.a.createElement(b,{className:"border border-secondary col-3 py-2 my-4 mx-auto"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));document.getElementById("root")&&c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root"));var h=document.getElementById("postsComp"),g=o.a.createElement;h&&c.a.render(g(b,h.dataset),h),document.querySelectorAll(".post-detail").forEach((function(e){c.a.render(g(v,e.dataset),e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){e.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.bbf4520f.chunk.js.map