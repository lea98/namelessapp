(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(5),c=a.n(r),s=(a(12),a(13),a(4)),l=a(1);function i(e,t,a,n){var o;n&&(o=JSON.stringify(n));var r=new XMLHttpRequest,c="http://localhost:8000".concat(t);r.responseType="json";var s=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}("csrftoken");r.open(e,c),s&&n&&(r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",s)),r.onload=function(){403===r.status&&"Authentication credentials were not provided."===r.response.detail&&(window.location.href="/"),a(r.response,r.status)},r.onerror=function(e){a({message:"error"},400),alert("Greska")},r.send(o)}function u(e){var t=e.post,a=e.className,n=e.action,r=e.didPerformAction,c=t.likes?t.likes:0,s=function(e,t){200!==t&&201!==t||!r||r(e,t)},l="like"===n.type?"".concat(c):"",u="like"===n.type?"fa fa-thumbs-up":"fa fa-thumbs-down";return o.a.createElement("span",{style:{margin:"0.2em"}},o.a.createElement("button",{style:{color:"Indigo"},className:a,onClick:function(e){e.preventDefault(),function(e,t,a){i("POST","/api/posts/action",a,{id:e,action:t})}(t.id,n.type,s)}}," ",l," ",o.a.createElement("i",{className:u,style:{fontSize:"30px"}})," "))}function m(e){var t=function(t){t.preventDefault(),window.location.href="/profile/".concat(e.post.creator.username)};return o.a.createElement("div",null,e.post.creator.profile_image?o.a.createElement("img",{alt:"",onClick:t,className:"rounded-circle",style:{cursor:"pointer",height:"55px",width:"55px"},src:"http://localhost:8000".concat(e.post.creator.profile_image)}):o.a.createElement("span",{style:{cursor:"pointer"},onClick:t,className:"py-3 px-3  rounded-circle bg-info"},e.post.creator.username))}function d(e){var t=e.post,a=e.className,r=Object(n.useState)(e.post?e.post:null),c=Object(l.a)(r,2),s=c[0],i=c[1],d=function(e){var t=e.match(/\d+/g);return t[t.length-1]}(window.location.href),f=t.id===parseInt(d),p=function(e,a){200===a&&i(e),console.log(t.creator)},g=function(e){var t=e.split("T");return[t[0],t[1].split(".")[0]]}(t.timestamp);return o.a.createElement("div",{className:a},o.a.createElement(m,{post:t}),o.a.createElement("p",{className:"mt-3"},t.creator.username),o.a.createElement("p",{className:"mt-3"},"#",t.id),o.a.createElement("p",{className:"mt-3"},t.content),!1===f?null:o.a.createElement("div",null,o.a.createElement("div",null,t.creator.first_name," ",t.creator.last_name),o.a.createElement("div",null,t.creator.email),o.a.createElement("div",{style:{marginBottom:"0.5em"}},g[0],", ",g[1])),o.a.createElement(u,{style:{margin:"0.2em"},post:s,didPerformAction:p,action:{type:"like"}}),o.a.createElement(u,{style:{margin:"0.2em"},post:s,didPerformAction:p,action:{type:"dislike"}}),!0===f?null:o.a.createElement("button",{style:{float:"left",marginRight:"0.2em",backgroundColor:"Indigo"},className:"btn btn-secondary",onClick:function(e){e.preventDefault(),window.location.href="/".concat(t.id)}},"See more"),e.loggedUser===t.creator.username?o.a.createElement("span",{className:"float-right",style:{cursor:"pointer",color:"Indigo"},onClick:function(){return e.handleDeletePost(t.id)}},o.a.createElement("svg",{width:"2em",height:"2em",viewBox:"0 0 16 16",className:"bi bi-trash",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),o.a.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))):null)}function f(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],c=a[1],u=Object(n.useState)([]),m=Object(l.a)(u,2),f=m[0],p=m[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),h=v[0],E=v[1];Object(n.useEffect)((function(){var t=Object(s.a)(e.newPosts).concat(r);t.length!==f.length&&p(t)}),[e.newPosts,f,r]),Object(n.useEffect)((function(){if(!1===h){!function(e,t){var a="/api/posts/";e&&(a="/api/posts/?username=".concat(e)),i("GET",a,t)}(e.username,(function(e,t){200===t?(c(e),E(!0)):alert("error")}))}}),[r,h,E,e.username]);var b=function(e){c(f.filter((function(t){return t.id!==e}))),function(e,t){i("DELETE","/api/posts/".concat(e,"/delete"),t,{id:e})}(e,y),console.log(e)},y=function(e,t){200===t?(alert("Post Deleted"),console.log(e,t)):alert("Post not found")};return f.map((function(t){return o.a.createElement(d,{className:"border border-primary col-xs-12 col-md-8 col-lg-5 py-5 my-5 mx-auto",post:t,key:t.id,handleDeletePost:b,loggedUser:e.loggedUser})}))}function p(e){var t=o.a.createRef(),a=e.didPost;return o.a.createElement("div",{className:"col-12 mb-4"},o.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault();var n=t.current.value;i("POST","/api/posts/create",(function(e,t){201===t?a(e):(alert("error"),console.log(e))}),{content:n}),t.current.value=""}},o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("textarea",{required:!0,ref:t}),o.a.createElement("button",{type:"submit",className:"btn btn-secondary",style:{marginLeft:"0.3em",backgroundColor:"Indigo"}},"POST"))))}function g(e){var t=e.id,a=Object(n.useState)(!1),r=Object(l.a)(a,2),c=r[0],s=r[1],u=Object(n.useState)(null),m=Object(l.a)(u,2),f=m[0],p=m[1],g=function(e,t){200===t?p(e):alert("Post not found")};return Object(n.useEffect)((function(){c||(!function(e,t){i("GET","/api/posts/".concat(e,"/"),t)}(t,g),s(!0))}),[t,c,s]),null===f?null:o.a.createElement(d,{post:f})}function v(e){var t="false"!==e.hasPermission,a=e.loggedUser,r=Object(n.useState)([]),c=Object(l.a)(r,2),i=c[0],u=c[1];return o.a.createElement("div",{className:e.className},!0===t&&o.a.createElement(p,{didPost:function(e){var t=Object(s.a)(i);t.unshift(e),u(t)},className:"col-12 mb-3"}),o.a.createElement(f,Object.assign({newPosts:i},e,{loggedUser:a})))}var h=function(){return o.a.createElement("div",{className:"bg-light"},o.a.createElement(v,{className:"border border-secondary col-3 py-2 my-4 mx-auto"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));document.getElementById("root")&&c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(h,null)),document.getElementById("root"));var E=document.getElementById("postsComp"),b=o.a.createElement;E&&c.a.render(b(v,E.dataset),E),document.querySelectorAll(".post-detail").forEach((function(e){c.a.render(b(g,e.dataset),e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.3c3aa0e2.chunk.js.map